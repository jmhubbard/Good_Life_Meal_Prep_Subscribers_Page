{% extends 'main/base.html' %}

{% block content %}
<div class="container firstElement col-10">
    <h1>Hello {{current_user.name}}!</h1>
    <p class="bodyText">Here is the weekly menu. Simply click the update buttons to change the quantites for each meal
        item. Whatever numbers are displayed on the page, will be your order. Feel free to update your order quanities
        as much as you like. Just make sure you have
        your order it by Thursday.</p>
</div>

<div class="container text-end letterText">
    {% if current_total > current_user.remaining_meals%}
    <div class="alert alert-danger text-center" role="alert">Your current order has more meals that what you have
        remaining on your current plan. Please adjust your order.</div>
    <h1 class="text-danger">Current order total: {{ current_total }} meals</h1>
    {% else %}
    <p class="fs-4">Current order total: {{ current_total }} meals</p>
    {% endif %}
    <p class="fs-4">Remaining meals left on current meal plan after this order: {{ meals_remaining_after_order }}
        meals</p>
</div>


{% if order_items|length > 0 %}
<div class="container">
    {% for meal in order_items %}
    <div class="row mb-4 border border-info border-2">
        <div class="col-md-2 px-0 pt-3">
            <img src="{{ meal.item.small_picture_url }}" alt="{{ meal.item }}" class=" mx-auto d-block">
        </div>
        <div class="col-sm-6">
            <div class="row">
                <div class="col">
                    <p class="fs-4 letterText mt-2 mb-1">{{ meal.item }}</p>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p class="fs-6 mb-2">{{ meal.item.description }}</p>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p class="fs-7 fw-bold">{{ meal.item.proteins }}C/{{ meal.item.carbs }}P/{{ meal.item.fats }}F
                        {{ meal.item.calories }}CAL</p>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="row">
                <div class="col">
                    <p class="mt-4 mb-2"><span class="fs-6 letterText fw-bold">Special Requests: </span>{{ meal.special_requests }}</p>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p class="mt-2 mb-2 fw-bold"><span class="fs-6 letterText">Quantity: </span>{{ meal.quantity }}</p>
                </div>
            </div>
            <div class="row">
                <div class="col text-center pb-4 pt-3">
                    <a href="{% url 'orderitem-update' meal.id %}" class="btn btn-outline-info btn-lg">Update</a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% else %}
<div class="container letterText closedMenu">
    <h3>You're too late! Ordering for this weeks menu is already over. Please stop by next to place your orders!</h3>
</div>

{% endif %}

{% endblock %}